<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>CuddleBear Shop</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
          rel="stylesheet">
</head>
<body>

    <!-- HEADER -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="#">🧸 CuddleBear</a>
            <div class="navbar-nav">
                <a class="nav-link" href="Home.html">Trang chủ</a>
                <a class="nav-link" href="product.html">Gấu bông</a>
                <a class="nav-link" href="Contact.html">Liên hệ</a>
                <a class="nav-link" id="loginLink" href="login.html">Đăng nhập</a>
                <a class="nav-link" id="registerLink" href="register.html">Đăng ký</a>

                <img id="profileIcon"
                     src="https://i.pravatar.cc/40"
                     style="display:none;border-radius:50%">

            </div>
        </div>
    </nav>

    <!-- BANNER -->
    <div class="bg-light text-center p-5">
        <h1>Gấu bông đáng yêu cho mọi khoảnh khắc</h1>
        <p>Món quà ngọt ngào dành cho người bạn yêu thương</p>
    </div>

    <!-- TOP PRODUCTS -->
    <div class="container mt-5">
        <h2 class="text-center mb-4">🧸 Gấu bông nổi bật</h2>
        <div class="row" id="productList"></div>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", () => {

            const loginLink = document.getElementById("loginLink");
            const registerLink = document.getElementById("registerLink");
            const profileIcon = document.getElementById("profileIcon");

            // reset mặc định
            loginLink.style.display = "inline-block";
            registerLink.style.display = "inline-block";
            profileIcon.style.display = "none";

            // 🔐 dùng sessionStorage
            const token = sessionStorage.getItem("token");

            if (token) {
                loginLink.style.display = "none";
                registerLink.style.display = "none";
                profileIcon.style.display = "inline-block";
            }
        });
    </script>


    <script>
        const API_URL = "https://localhost:7131/api/products/top4";

        fetch(API_URL)
            .then(res => res.json())
            .then(data => {
                const list = document.getElementById("productList");

                data.forEach(p => {
                    list.innerHTML += `
                        <div class="col-md-3 mb-4">
                          <div class="card h-100 shadow-sm">
                            <img src="${p.imageUrl || 'https://via.placeholder.com/300'}"
                                 class="card-img-top"
                                 style="height:220px; object-fit:cover">
                            <div class="card-body text-center">
                              <h5>${p.name}</h5>
                              <p class="text-danger fw-bold">
                                ${p.price.toLocaleString()} ₫
                              </p>
                              <a href="detail.html?id=${p.id}" class="btn btn-outline-dark">
                                Xem chi tiết
                              </a>
                            </div>
                          </div>
                        </div>
                      `;
                });
            })
            .catch(() => {
                document.getElementById("productList").innerHTML =
                    "<p class='text-danger text-center'>Không tải được sản phẩm</p>";
            });
    </script>

</body>
</html>
